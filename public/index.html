<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Calendar Assistant</title>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
        padding: 0;
      }
      #calendar {
        max-width: 900px;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <h1>Calendar Assistant</h1>
    <div id="calendar"></div>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');

        const calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          selectable: true,
          editable: true,

          events: '/events', // fetch from Express server

          select: async function (info) {
            const title = prompt('Enter event title:');
            if (title) {
              const newEvent = {
                title: title,
                start: info.startStr,
                end: info.endStr
              };

              // Send event to server
              const res = await fetch('/events', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(newEvent)
              });

              const savedEvent = await res.json();
              calendar.addEvent(savedEvent);
            }
            calendar.unselect();
          }
        });

        calendar.render();
      });
    </script>
  </body>
</html>
